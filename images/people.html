<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>HackWithMe</title>
   <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link rel="stylesheet" href="css/animate.css">
</head>
<body ng-app="app" ng-controller="MainController as main" onload="initialize()">
  <div class="navbar-fixed">
	<nav class="red" role="navigation">
    <div class="nav-wrapper container" id="navbar"><a id="logo-container" href="#" class="brand-logo">Hack With Me</a>
      <ul class="right hide-on-med-and-down">
        <li class="red darken-3 waves-effect waves-light"><a href="#"><i class="material-icons left">view_module</i>Members</a></li>
        <li class="waves-effect waves-light"><a href="profile.html" class="waves-effect waves-light"><i class="material-icons left">picture_in_picture</i>Profile</a></li>
        <li class="waves-effect waves-light"><a href="login.html"><i class="material-icons left">done</i>Log Out</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a href="people.html"><i class="material-icons left">view_module</i>Members</a></li>
        <li><a href="profile.html">Profile</a></li>
        <li><a href="#">Log Out</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>
</div>

  <div class="row">
    <div class=" card col l12 s12 m12 shrink" style = "">
        <form class="col s12">
      <div class="row" id="search">
        <div class="input-field col s12">
          <i class="material-icons prefix">search_circle</i>
          <input id="icon_prefix" type="text" class="validate" ng-model="main.searchInput">
          <label for="icon_prefix">Search Tag</label>
        </div>
      </div>
    </form>

    </div>
    <div class="col l12 s12 m12">
      <ul class="collection">
        <li class="collection-item avatar" ng-repeat="person in main.people | orderBy:'distance' | filter: {tags: main.searchInput}" >
          <img ng-src="{{person.img}}" alt="" style="height:80%; width:auto;"class="circle">
          <div style="margin-left:30px">
            <span class="title">{{person.name}} - {{person.distance}} Miles Away</span>
             <p><div class="chip tag" ng-repeat="tag in person.tags">{{tag}}</div></p>
            <a href="#!" class="btn secondary-content waves-effect waves-light"  onclick="Materialize.toast('Notified', 1000);$(this).closest('li').remove();" >Notify</a>
            {{person.hidden}}
          </div>
        </li>
      </ul>
  </div>
  <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a>

  <div id="modal1" class="modal">
   <div class="modal-content">
     <h4>Modal Header</h4>
     <p>A bunch of text</p>
   </div>
   <div class="modal-footer">
     <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
   </div>
 </div>
  <div>
    <input id="address" type="textbox" style="width:60%" value="rua tabapuã - vila olimpia - são paulo">
    <input type="button" value="Geocode" onclick="codeAddress()">
    <input type="text" id="lat"/>
    <input type="text" id="lng"/>

  </div>
    <div id="googleMap"></div>

<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
  <script>
  $(document).ready(function(){
    // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
    $('.modal-trigger').leanModal();
  });

  var geocoder;
  var map;
  var mapOptions = {
      zoom: 17,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
  var marker;
  function initialize() {
    geocoder = new google.maps.Geocoder();
    map = new google.maps.Map(document.getElementById('googleMap'), mapOptions);
    codeAddress();
  }
  function codeAddress() {
    var address = document.getElementById('address').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        if(marker)
          marker.setMap(null);
        marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location,
            draggable: true
        });
        google.maps.event.addListener(marker, "dragend", function() {
          document.getElementById('lat').value = marker.getPosition().lat();
          document.getElementById('lng').value = marker.getPosition().lng();
        });
        document.getElementById('lat').value = marker.getPosition().lat();
        document.getElementById('lng').value = marker.getPosition().lng();
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
  }
  </script>

  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular.min.js"></script>
  <script src="js/app.js"></script>
  <script src="js/controller.js"></script>
  <script src="js/materialize.js"></script>
   <script src="js/node.js"></script>
  <script src="js/Twilio.js"></script>
  <script src="js/init.js"></script>
</body>
</html>
