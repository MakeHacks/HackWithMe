<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>HackWithME</title>
   <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link rel="stylesheet" href="css/animate.css">

  <script src="http://maps.google.com/maps/api/js?key=AIzaSyA-NoY29NaRKFxt0eUXEkj3TvG4cQlOp-k&sensor=true"></script>
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular.min.js"></script>
  <script src="js/app.js"></script>
  <script src="js/controller.js"></script>
  <script src="js/materialize.js"></script>
   <script src="js/node.js"></script>
  <script src="js/Twilio.js"></script>
  <script src="js/init.js"></script>
  <script>
  var map;
 var marker;

 function searchAddress() {

   var addressInput = document.getElementById('address');
   console.log(addressInput);
   var geocoder = new google.maps.Geocoder();

   geocoder.geocode({address: addressInput}, function(results, status) {

     if (status == google.maps.GeocoderStatus.OK) {

       var myResult = results[0].geometry.location; // reference LatLng value

       createMarker(myResult); // call the function that adds the marker

       map.setCenter(myResult);

       map.setZoom(17);

     } else { // if status value is not equal to "google.maps.GeocoderStatus.OK"

     // warning message
     alert("The Geocode was not successful for the following reason: " + status);

   }
   });
}
   function removeDummy() {
     var elem = document.getElementById('address');
     elem.parentNode.removeChild(elem);
     return false;
 }


 function createMarker(latlng) {

    // If the user makes another search you must clear the marker variable
    if(marker != undefined && marker != ''){
     marker.setMap(null);
     marker = '';
    }

    marker = new google.maps.Marker({
       map: map,
       position: latlng
    });

 }

 function initialize() {
   var mapOptions = {
     center: new google.maps.LatLng(40.680898,-8.684059),
     zoom: 11,
     mapTypeId: google.maps.MapTypeId.ROADMAP
   };
   var map = new google.maps.Map(document.getElementById("map"), mapOptions);
 }
 google.maps.event.addDomListener(window, "load", initialize);
  </script>
    <link rel="icon" type="image/png"
       href="images/favicon.ico" />
</head>
<body ng-app="app" ng-controller="MainController as main">
  <div class="navbar-fixed">
  <nav class="red" role="navigation">
     <div class="nav-wrapper container" id="navbar">
       <a href="#" class="brand-logo">HackWithME</a>
       <ul class="right hide-on-med-and-down">
         <li class="red darken-3 waves-effect waves-light"><a href="maps.html" class="waves-effect waves-light"><i class="material-icons left">person_pin</i>Maps</a></li>
         <li class="waves-effect waves-light"><a href="people.html"><i class="material-icons left">view_module</i>Members</a></li>
         <li class="waves-effect waves-light"><a href="#" class="waves-effect waves-light"><i class="material-icons left">picture_in_picture</i>Profile</a></li>
         <li class="waves-effect waves-light"><a href="login.html"><i class="material-icons left">done</i>Log Out</a></li>
       </ul>
       <ul id="nav-mobile" class="side-nav">
         <li><a href="people.html">Members</a></li>
         <li><a href="map.html">Map</a></li>
         <li><a href="profile.html">Profile</a></li>
         <li><a href="#">Log Out</a></li>
       </ul>
       <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
     </div>
   </nav>
 </div>

 <div>
   <ul class="collection">
     <li class="collection-item avatar" ng-repeat="person in main.people" >
       <p id="address">{{person.address}}</p>
         <script>
            searchAddress();
         </script>
     </li>
   </ul>
 </div>

   <div id="map"></div>

 </body>
 </html>
